import { Avatar } from '@mui/material';
import EmojiEmotionsIcon from '@mui/icons-material/EmojiEmotions';
import React, { useEffect, useRef, useState } from 'react';
import { UserHook } from './Context/userContext';

import data from '@emoji-mart/data';
import Picker from '@emoji-mart/react';

const ChatWindow = ({setShowMobileDesc, showMobileDesc}) => {
  const { getMessages, messages, user, addMessageToDb } = UserHook();
  const [showEmojiBoard, setShowEmojiBoard] = useState(false);
  const [text, setText] = useState("");
  const chatContainerRef = useRef(null);

  useEffect(() => {
    getMessages();
    if (chatContainerRef.current) {
      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;
    }

  }, [])
  
  function sendMessage(e){
    e.preventDefault();
    addMessageToDb(text);
    setText("");
  }

  function addEmoji(e){
    const sym = e.unified.split("_");
    const codeArray = [];
    sym.forEach((el) => codeArray.push("0x" + el));
    let emoji = String.fromCodePoint(...codeArray);
    setText(text + emoji);
  }
  
  return (
    <div className='relative w-full lg:w-3/4 h-full bg-zinc-900 text-white'>  
      {/* header */}
      <div className='border-b-2 border-zinc-500 px-10 py-4 flex items-center' onClick={() => setShowMobileDesc(!showMobileDesc)}>
        <img className='h-16 w-16 rounded-full' 
          src='data:image/jpeg;base64,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' />
        <div className='ml-4'>
          <h3 className='text-2xl'> Chitchat Group </h3>
        </div>
      </div>
      
      {/* Chat window body */}
      <div ref={chatContainerRef} className='p-10 h-[80vh] overflow-y-auto'>
        {messages && messages.map((message) => 
        <div className={`my-4 flex flex-col ${message.email === user.email?'items-end':'items-start'}`} key={message.id}>
            <span className='text-xs px-1'> {message.name} </span>
            <span className={`${message.email === user.email?'bg-fuchsia-700':'bg-zinc-700'}  px-2 py-1 rounded-lg`}> 
              <span className='text-lg mr-2'> {message.msg} </span>
              <span className='text-xs relative -bottom-1'> {message.time} </span>
            </span>
          </div>
        )}
      </div>

      {/* footer */}
      <div className='absolute w-full bottom-2'>
        {showEmojiBoard && <div className='overflow-hidden'>
            <Picker data={data} perLine={10} navPosition={'bottom'} maxFrequentRows={'4'} previewPosition={'none'} onEmojiSelect={addEmoji} />
        </div>}
        <div className='px-4 py-2 lg:py-4 flex justify-between bg-zinc-800'>
          <EmojiEmotionsIcon onClick={() => setShowEmojiBoard(!showEmojiBoard)} className='hover:cursor-pointer' />
          <form className='relative w-full flex justify-between' onSubmit={sendMessage}>
            <input type='text'
              value={text}
              onChange={(e) => setText(e.target.value)}
              placeholder='Send a message' 
              className='bg-transparent w-full mx-2 px-2 focus:outline-none' />
            <button type='submit'> Send </button>
          </form>
        </div>
      </div>

    </div>
  )
}

export default ChatWindow;
